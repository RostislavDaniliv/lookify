{% extends 'base.html' %}
{% load static %}

{% block title %}Lookify | Результат{% endblock %}

{% block content %}
<section class="py-8 px-4 text-center">
    <h1 class="text-4xl font-bold text-textlight mb-10">
        Ваші результати примірки!
    </h1>

    {% if result_urls %}
        <div class="bg-white/5 p-6 rounded-2xl shadow-soft backdrop-blur-md border border-gray-700 max-w-3xl mx-auto mb-10">
            <h2 class="text-xl font-semibold text-textlight mb-4">Ваш новий образ</h2>
            <div class="relative w-full overflow-hidden rounded-xl mb-6 max-h-[70vh] flex items-center justify-center">
                <img src="{{ result_urls.0 }}" alt="Результат примірки" class="max-w-full max-h-[60vh] object-contain rounded-lg border border-gray-600 shadow-lg">
                <span class="absolute top-3 right-3 bg-primary text-white text-xs font-bold px-3 py-1 rounded-full">Попередній перегляд</span>
            </div>
            
            <!-- Small previews for multiple results -->
            {% if result_urls|length > 1 %}
            <div class="flex justify-center gap-4 mt-4 overflow-x-auto pb-2">
                {% for url in result_urls %}
                    {% if not forloop.first %}
                    <img src="{{ url }}" alt="Результат {{ forloop.counter }}" class="w-24 h-24 object-cover rounded-md border border-gray-600 cursor-pointer hover:border-secondary transition-all duration-200">
                    {% endif %}
                {% endfor %}
            </div>
            {% endif %}

            <div class="flex flex-col sm:flex-row justify-center gap-4 mt-8">
                <button class="flex-1 w-full sm:w-auto px-6 py-3 bg-gradient-to-r from-primary to-secondary text-white font-bold rounded-xl shadow-lg hover:shadow-neon-primary transition-all duration-300">
                    Завантажити результат
                </button>
                <a href="{% url 'upload_view' %}" class="flex-1 w-full sm:w-auto px-6 py-3 border border-gray-600 rounded-xl text-textlight hover:border-primary hover:text-primary transition-all duration-300 flex items-center justify-center font-semibold">
                    Спробувати іншу річ
                </a>
                <button class="flex-1 w-full sm:w-auto px-6 py-3 border border-gray-600 rounded-xl text-textlight hover:border-secondary hover:text-secondary transition-all duration-300 font-semibold">
                    Поділитися
                </button>
            </div>
        </div>

        <!-- Tips for improvement -->
        <div class="bg-white/5 p-6 rounded-2xl shadow-soft backdrop-blur-md border border-gray-700 max-w-3xl mx-auto text-left">
            <h3 class="text-xl font-semibold text-textlight mb-3 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 mr-2 text-secondary">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712L12 15l-2.121-2.121c-1.172-1.025-1.172-2.687 0-3.712z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M22 10.5h-6m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM10.5 18H3" />
                </svg>
                Як покращити результат наступного разу
            </h3>
            <ul class="list-disc list-inside text-gray-400 space-y-1 text-sm">
                <li>Переконайтеся, що об'єкт для примірки чітко видно на фотографії.</li>
                <li>Використовуйте фотографії з кращим освітленням та вищим контрастом.</li>
                <li>Спробуйте різні ракурси або пози, щоб знайти ідеальний варіант.</li>
            </ul>
        </div>

    {% else %}
        <!-- Empty State -->
        <div class="bg-white/5 p-10 rounded-2xl shadow-soft backdrop-blur-md border border-gray-700 text-center max-w-xl mx-auto">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-20 h-20 mx-auto mb-6 text-gray-500">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.174 3.374 1.98 3.374h14.71c1.806 0 2.85-1.874 1.98-3.374L13.94 2.334c-.876-1.5-3.036-1.5-3.91 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
            </svg>
            <h2 class="text-2xl font-semibold text-textlight mb-4">Щось пішло не так</h2>
            <p class="text-gray-400 mb-6">Не вдалося отримати результати примірки. Будь ласка, спробуйте ще раз.</p>
            <a href="{% url 'upload_view' %}" class="inline-block px-8 py-3 bg-gradient-to-r from-primary to-secondary text-white font-bold rounded-xl shadow-lg hover:shadow-neon-primary transition-all duration-300">
                Повернутись на головну
            </a>
        </div>
    {% endif %}
</section>
{% endblock %}
